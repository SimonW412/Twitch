(this.webpackJsonptwitchfe=this.webpackJsonptwitchfe||[]).push([[0],{143:function(e,t,r){},175:function(e,t,r){"use strict";r.r(t);var s=r(0),a=r.n(s),n=r(124),c=r.n(n),i=(r(143),r(177)),o=r(133),l=r(185),j=r(193),d=r(194);const h=e=>fetch(`/search?game_id=${e}`).then((e=>{if(200!==e.status)throw Error("Fail to find the game");return e.json()})),m=e=>(e=>fetch(`/game?game_name=${e}`).then((e=>{if(200!==e.status)throw Error("Fail to find the game");return e.json()})))(e).then((e=>{if(e&&e[0].id)return h(e[0].id);throw Error("Fail to find the game")})),b="/favorite",u=()=>fetch(b,{credentials:"include"}).then((e=>{if(200!==e.status)throw Error("Fail to get favorite item");return e.json()}));var O=r(178),x=r(179),g=r(67),p=r(7);var f=function(e){let{items:t}=e;return null===t||void 0===t?void 0:t.map((e=>Object(p.jsx)(l.a.Item,{children:Object(p.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:`${e.broadcaster_name} - ${e.title}`})},e.id)))},y=r(186),v=r(187),w=r(135),S=r(188),F=r(189);const{SubMenu:C}=l.a;var I=function(e){let{favoriteItems:t}=e;const[r,a]=Object(s.useState)(!1),{videos:n,streams:c,clips:i}=t;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g.a,{type:"primary",shape:"round",onClick:()=>{a(!0)},icon:Object(p.jsx)(v.a,{}),children:"My Favorites"}),Object(p.jsx)(y.a,{title:"My Favorites",placement:"right",width:720,visible:r,onClose:()=>{a(!1)},children:Object(p.jsxs)(l.a,{mode:"inline",defaultOpenKeys:["streams"],style:{height:"100%",borderRight:0},selectable:!1,children:[Object(p.jsx)(C,{icon:Object(p.jsx)(w.a,{}),title:"Streams",children:Object(p.jsx)(f,{items:c})},"streams"),Object(p.jsx)(C,{icon:Object(p.jsx)(S.a,{}),title:"Videos",children:Object(p.jsx)(f,{items:n})},"videos"),Object(p.jsx)(C,{icon:Object(p.jsx)(F.a,{}),title:"Clips",children:Object(p.jsx)(f,{items:i})},"clips")]})})]})},P=r(184),k=r(181),_=r(183),E=r(190),T=r(191);var R=function(){const[e,t]=Object(s.useState)(!1);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g.a,{shape:"round",type:"primary",onClick:()=>{t(!0)},children:"Register"}),Object(p.jsx)(P.a,{title:"Register",visible:e,onCancel:()=>{t(!1)},footer:null,destroyOnClose:!0,children:Object(p.jsxs)(k.a,{name:"normal_register",initialValues:{remember:!0},onFinish:e=>{(e=>fetch("/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(200!==e.status)throw Error("Fail to register")})))(e).then((()=>{t(!1),o.b.success("Successfully signed up")})).catch((e=>{o.b.error(e.message)}))},preserve:!1,children:[Object(p.jsx)(k.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(p.jsx)(_.a,{prefix:Object(p.jsx)(E.a,{}),placeholder:"Username"})}),Object(p.jsx)(k.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(p.jsx)(_.a,{prefix:Object(p.jsx)(T.a,{}),placeholder:"Password"})}),Object(p.jsx)(k.a.Item,{name:"first_name",rules:[{required:!0,message:"Please input your Firstname!"}],children:Object(p.jsx)(_.a,{placeholder:"firstname"})}),Object(p.jsx)(k.a.Item,{name:"last_name",rules:[{required:!0,message:"Please input your Lastname!"}],children:Object(p.jsx)(_.a,{placeholder:"lastname"})}),Object(p.jsx)(k.a.Item,{children:Object(p.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Register"})})]})})]})};var L=function(e){let{onSuccess:t}=e;const[r,a]=Object(s.useState)(!1);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g.a,{shape:"round",onClick:()=>{a(!0)},style:{marginRight:"20px"},children:"Login"}),Object(p.jsx)(P.a,{title:"Log in",visible:r,onCancel:()=>{a(!1)},footer:null,destroyOnClose:!0,children:Object(p.jsxs)(k.a,{name:"normal_login",onFinish:e=>{(e=>{const t=new FormData;return t.append("username",e.username),t.append("password",e.password),fetch("/login",{method:"POST",credentials:"include",body:t}).then((e=>{if(204!==e.status)throw Error("Fail to log in")}))})(e).then((()=>{a(!1),o.b.success("Welcome back"),t()})).catch((e=>{o.b.error(e.message)}))},preserve:!1,children:[Object(p.jsx)(k.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(p.jsx)(_.a,{prefix:Object(p.jsx)(E.a,{}),placeholder:"Username"})}),Object(p.jsx)(k.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(p.jsx)(_.a.Password,{prefix:Object(p.jsx)(T.a,{}),placeholder:"Password"})}),Object(p.jsx)(k.a.Item,{children:Object(p.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Login"})})]})})]})};const{Header:q}=i.a;var $=function(e){let{loggedIn:t,signoutOnClick:r,signinOnSuccess:s,favoriteItems:a}=e;return Object(p.jsx)(q,{children:Object(p.jsxs)(O.a,{justify:"space-between",children:[Object(p.jsx)(x.a,{children:t&&Object(p.jsx)(I,{favoriteItems:a})}),Object(p.jsxs)(x.a,{children:[t&&Object(p.jsx)(g.a,{shape:"round",onClick:r,children:"Logout"}),!t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L,{onSuccess:s}),Object(p.jsx)(R,{})]})]})]})})},J=r(114);var N=function(e){let{onSuccess:t}=e;const[r,a]=Object(s.useState)(!1);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g.a,{shape:"round",onClick:()=>{a(!0)},icon:Object(p.jsx)(J.a,{}),style:{marginLeft:"20px",marginTop:"20px"},children:"Custom Search"}),Object(p.jsx)(P.a,{title:"Search",visible:r,onCancel:()=>{a(!1)},footer:null,children:Object(p.jsxs)(k.a,{name:"custom_search",onFinish:e=>{m(e.game_name).then((e=>{a(!1),t(e)})).catch((e=>{o.b.error(e.message)}))},children:[Object(p.jsx)(k.a.Item,{name:"game_name",rules:[{required:!0,message:"Please enter a game name"}],children:Object(p.jsx)(_.a,{placeholder:"Game name"})}),Object(p.jsx)(k.a.Item,{children:Object(p.jsx)(g.a,{type:"primary",htmlType:"submit",children:"Search"})})]})})]})},M=r(130),U=r(105),D=r(180),V=r(182),A=r(192);const{TabPane:B}=M.a,G="stream",H="videos",K="clips",W=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const a=`${e.broadcaster_name} - ${e.title}`,n=r.find((t=>t.twitch_id===e.twitch_id));return Object(p.jsxs)(p.Fragment,{children:[t&&Object(p.jsx)(U.a,{title:n?"Remove from favorite list":"Add to favorite list",children:Object(p.jsx)(g.a,{shape:"circle",icon:n?Object(p.jsx)(v.a,{}):Object(p.jsx)(A.a,{}),onClick:()=>{var t;n?(t=e,fetch(b,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:t})}).then((e=>{if(200!==e.status)throw Error("Fail to delete favorite item")}))).then((()=>{s()})).catch((e=>{o.b.error(e.message)})):(e=>fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({favorite:e})}).then((e=>{if(200!==e.status)throw Error("Fail to add favorite item")})))(e).then((()=>{s()})).catch((e=>{o.b.error(e.message)}))}})}),Object(p.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",width:450},children:Object(p.jsx)(U.a,{title:a,children:Object(p.jsx)("span",{children:a})})})]})},z=(e,t,r,s)=>Object(p.jsx)(D.b,{grid:{xs:1,sm:2,md:4,lg:4,xl:6},dataSource:e,renderItem:e=>{return Object(p.jsx)(D.b.Item,{style:{marginRight:"20px"},children:Object(p.jsx)(V.a,{title:W(e,t,r,s),children:Object(p.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",style:{width:"100%",height:"100%"},children:Object(p.jsx)("img",{alt:"Placeholder",src:(a=e.thumbnail_url,a.replace("%{height}","252").replace("%{width}","480").replace("{height}","252").replace("{width}","480")),style:{width:"100%",height:"100%"}})})})});var a}});var Q=e=>{let{resources:t,loggedIn:r,favoriteItems:s,favoriteOnChange:a}=e;const{videos:n,streams:c,clips:i}=t,{videos:o,streams:l,clips:j}=s;return Object(p.jsxs)(M.a,{defaultActiveKey:G,children:[Object(p.jsx)(B,{tab:"Streams",forceRender:!0,children:z(c,r,l,a)},G),Object(p.jsx)(B,{tab:"Videos",forceRender:!0,children:z(n,r,o,a)},H),Object(p.jsx)(B,{tab:"Clips",forceRender:!0,children:z(i,r,j,a)},K)]})};const{Header:X,Content:Y,Sider:Z}=i.a;var ee=function(){const[e,t]=Object(s.useState)(!1),[r,a]=Object(s.useState)([]),[n,c]=Object(s.useState)([]),[m,b]=Object(s.useState)({videos:[],streams:[],clips:[]});return Object(s.useEffect)((()=>{fetch("/game").then((e=>{if(200!==e.status)throw Error("Fail to get top games");return e.json()})).then((e=>{c(e)})).catch((e=>{o.b.error(e.message)}))}),[]),Object(p.jsxs)(i.a,{children:[Object(p.jsx)(X,{children:Object(p.jsx)($,{loggedIn:e,signoutOnClick:()=>{fetch("/logout",{method:"POST",credentials:"include"}).then((e=>{if(204!==e.status)throw Error("Fail to log out")})).then((()=>{t(!1),o.b.success("Successfully Signed out")})).catch((e=>{o.b.error(e.message)}))},signinOnSuccess:()=>{t(!0),u().then((e=>{a(e)}))},favoriteItems:r})}),Object(p.jsxs)(i.a,{children:[Object(p.jsxs)(Z,{width:300,className:"site-layout-background",children:[Object(p.jsx)(N,{onSuccess:e=>{b(e)}}),Object(p.jsx)(l.a,{mode:"inline",onSelect:e=>{let{key:t}=e;"recommendation"!==t?h(t).then((e=>{b(e)})):fetch("/recommendation",{credentials:"include"}).then((e=>{if(200!==e.status)throw Error("Fail to get recommended item");return e.json()})).then((e=>{b(e)}))},style:{marginTop:"10px"},items:(e=>[{label:"Recommend for you!",key:"recommendation",icon:Object(p.jsx)(j.a,{})},{label:"Popular Games",key:"popular_games",icon:Object(p.jsx)(d.a,{}),children:e.map((e=>({label:e.name,key:e.id,icon:Object(p.jsx)("img",{alt:"placeholder",src:e.box_art_url.replace("{height}","40").replace("{width}","40"),style:{borderRadius:"50%",marginRight:"20px"}})})))}])(n)})]}),Object(p.jsx)(i.a,{style:{padding:"24px"},children:Object(p.jsx)(Y,{className:"site-layout-background",style:{padding:24,margin:0,height:800,overflow:"auto"},children:Object(p.jsx)(Q,{resources:m,loggedIn:e,favoriteOnChange:()=>{u().then((e=>{a(e)})).catch((e=>{o.b.error(e.message)}))},favoriteItems:r})})})]})]})};var te=e=>{e&&e instanceof Function&&r.e(3).then(r.bind(null,195)).then((t=>{let{getCLS:r,getFID:s,getFCP:a,getLCP:n,getTTFB:c}=t;r(e),s(e),a(e),n(e),c(e)}))};c.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(ee,{})})),te()}},[[175,1,2]]]);
//# sourceMappingURL=main.dc5c153c.chunk.js.map